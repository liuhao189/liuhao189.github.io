# 软件架构模式

本文观点和内容主要参考了Software Architecture Patterns的书。

## 为什么要学习基本的软件架构

1、了解了基本的软件架构知识，你可以更容易理解，遵守你所工作的软件项目的要求。

2、知道这些基础的架构模式可以让你在写代码时做更好的决策。eg：如果你的应用基于事件驱动地微服务，做为软件工程师你必须将越来越复杂的代码拆分为独立的服务。

## 五种模式

1、分层结构。

2、事件驱动结构。

3、微内核架构或插件结构

4、微服务体系结构

5、云架构模式

## 分层结构

对于单体应用来说，是最常见的软件结构。该模式背后的基本思想是将应用程序逻辑分为几个层，每个层封装特定的角色。

eg：持久化层负责app和db的通讯。

![分层结构图](/note/assets/imgs/layer-software-arch.png)

## 事件驱动结构

该模式背后的基本思想是将应用程序分为单一职责的事件处理组件。该组件可以接收和异步处理事件。

该模式是一种流行的分布式异步体系结构模式，以高可扩展性和适应性而闻名。

![事件驱动结构图](/note/assets/imgs/event-software-arch.png)

## 微内核结构或插件结构

微内核结构，也被称为插件结构。在设计时分为两个组件：核心系统和插件模式。一个比较好的例子是浏览器，你可以安装很多浏览器插件。

![插件结构图](/note/assets/imgs/plugin-software-arch.png)

## 微服务结构

微服务体系结构由单独部署的服务组成，其中每个服务都有单一的职责。这些服务是彼此独立的，如果一个服务失败，其它服务不会停止运行。

![微服务结构图](/note/assets/imgs/microservices-software-arch.png)

## 基于空间的结构

基于空间的模式背后的主要思想是分布式共享内存，以缓解数据库级别经常出现的问题。我们的假设是，通过使用内存中的数据处理大多数操作，我们可以避免数据库中的额外操作，从而避免将来可能出现的任何问题。

基本方式是将应用程序划分为多个处理单元(可根据需要自动放大和缩小)，在这些但是远之间复制和处理数据，而无需将数据持久化到中央数据库。

![基于空间的结构图](/note/assets/imgs/space-software-arch.png)

# 软件架构模式

开发人员在没有正式的体系结构的情况下开始编写应用程序是很常见的。

如果没有清晰且定义良好的体系结构，大多数开发人员和架构师将求助于事实上的标准传统分层体系结构模式。

通过将源代码模块分离到包中来创建隐式层，不幸的是，这种做法会产生一系列无组织的源代码模块，它们之间缺乏明确的角色、责任和关系。这被称为大泥球反模式架构。



## 参考文档

https://orkhanscience.medium.com/software-architecture-patterns-5-mins-read-e9e3c8eb47d2

https://www.oreilly.com/content/software-architecture-patterns/