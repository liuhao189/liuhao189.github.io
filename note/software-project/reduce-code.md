# 减少代码量

复制-粘贴是一件非常有效地方式，但是它们一点也不适合维护。作为一个专业的程序员，我们都在不断地寻找方式来复用代码。

降低代码量就是效率的提升。

## 经验总结的复用

经验总结的复用，指的是结合组织和项目的经验，提取出其中的共同部分，以便在其它项目中继续使用。

主要分为以下四类：

1、脚手架

2、组件库

3、模式库

4、模板和模板应用。

### 脚手架

脚手架是一种快速创建新应用的方式，在脚手架里，我们会总结出过往经验中的模式、代码，将这些模式和代码融入其中。

脚手架分两类：

1、框架官方脚手架，Vue官方脚手架，React官方脚手架。缺点：缺少一些团队、组织特定的因子。

2、自制脚手架，在官方框架的基础上，加上部署、模式库等相关的部分。缺点：需要团队维护。优点：KPI，更加适合公司。

### 组件库

组件库对于每个Web项目来说，都是必不可少的元素。它适用于客户端开发的UI复用。

本身分三个层级：

1、基础UI组件，最小化的组件，它们不依赖于其它组件。

2、复合组件，由多个基础组件组成的组件，它们依赖于现有的组件。

3、业务组件，带有业务功能的大量重复使用的组件。

一般而言，我们会使用第三方的基础UI组件库，在组件库的基础之上，封装自己的业务组件库。

### 模式库

模式库其本质是一个代码集，它将我们常用的代码提取到一个公共的类库中。

两种方式：

1、Git Submodule，公用的函数放到一个Git Submodule中，让多个项目可以同时使用。缺点：维护容易出错。

2、依赖包，即将依赖打包成库，使用时只需要引入依赖即可。缺点：更新不方便。

### 模板和模板应用

组件库和模板，实际上是设计系统的一部分。设计系统是一组相互关联的设计模式与共同实践的，以连贯组织来达成数字产品的目的。

六个层级：

1、原子，事物的基本组成部分，它是最小的单元，不能再往下细分。基本的HTML标签。

2、分子，原子聚合而成的粒子，在UI设计中，分子是由几个基本的HTML标签组成的简单组织。

3、有机体，分子和原子组成的相对复杂的UI组件。它用于创建一些独立，可复用的内容。eg：header组件

4、模板，整合前面的元素，构建整体的布局。eg：header，footer，content。

5、页面，将实际内容套件在特定模板，页面是模板的具体实例。

6、模板应用，页面的基础上，进一步地整合而成，用于帮助开发人员快速的构建某一类型的应用。

## 工具

上述的四种方式，是比较常见的方式，随着项目数量的变多，开发人员数量的膨胀，它们开始变得麻烦。我们需要编写一些工具，以节省大量的人力成本。

### CLI

一般包括：下载脚手架；配置、安装依赖；集成组件库；配置自动化部署脚本。

优秀案例：Schematics

### IDE插件

IDE插件，是一个非常有意思的思路，我们可以编写一个IDE插件，在插件中加入我们常见的代码、模式和模板。

VSCode中：

1、snippets，代码段，定义好一个预填充的代码段，而后只需要输入关键词即可。

2、typings，用于提供智能感知，写好API相关的接口及其文档。

### 设计系统和代码生成

当我们有一个成体系的设计系统，就可以使用框架来优化组件的使用。下一步就是代码自动生成，对于拥有设计系统的项目而言，我们可以直接通过类似于Sketch2Code的工具，直接将我们的设计转换为代码。





